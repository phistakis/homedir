export AMAZON='34.248.150.115'
export AGENT='54.76.12.219'
alias rpycserver='rsync -avz pysrc/comet/comet/agent $AGENT:'
alias sshamazon='ssh $AMAZON'
alias syncamazon='rsync -avz --delete --exclude *.pyc --exclude *.o --exclude dist --exclude mount_points --exclude venv --exclude management --exclude .git ~/vast/orion $AMAZON:'
alias sshdebug='ssh debug.vastdata.com'
alias sshbouncer='ssh 52.214.180.227'
alias sshopenelec='ssh 192.168.1.198'
alias aliases='vim ~/.bashaliases; . ~/.bashaliases'
alias ualiases='. ~/.bashaliases'
alias mv='mv -v'
alias rsy='rsync -avz --progress'
alias .='source'
alias local_easy_install="easy_install -d $HOME/work/python -s $HOME/bin"
alias updisp="export DISPLAY=`echo $SSH_CLIENT | awk {'print $1'}`:0.0"

function installamazon() {
    set +x
    sed -i -e "s/export AMAZON='[0-9].*/export AMAZON='$1'/" ~/.bashaliases ;
    . ~/.bashaliases ;
    syncamazon ;
    rsync -avz --delete --exclude *.o --exclude dist --exclude mount_points --exclude venv --exclude .git ~/vast/orion $AMAZON:
    sshamazon docker login git.vastdata.com:4567/dev/orion -u aviv -p 12345612 ;
    sshamazon "cd orion; venv/bin/pip install pudb" ;
    sshamazon "sudo yum install -y htop" ;
    sshamazon "docker pull git.vastdata.com:4567/dev/orion:runner_image &; cd orion; scons -j8 python_debug=1 pysrc venv" ;
    sshamazon
    }

function lsw() { ls -lah `which $*`; }
function lw () { less `which $*`; }
function from() { git grep -i --color $1 | grep -oE "from.*" | grep import | sort | uniq ; }
function def() { git grep -i --color $1 | grep -E "(class|def) | grep -v html" ; }
function vm() { ssh user@ic-phy-$1.bla.com ; }
function vmc() { ssh-copy-id user@ic-phy-$1.bla.com ; }
function fname() { find . -name "*$1*"; }
function ggg() { grep -iR $1 src pysrc tests; }
function ggp() { find src pysrc tests management -name "*.py" | xargs grep -i --color $1 ; }
function ggpl() { ggp $1 | less ; }
function dockerdeploy() { docker build -f install/deploy_Dockerfile -t git.vastdata.com:4567/dev/orion:$1 . && docker push git.vastdata.com:4567/dev/orion:$1 ; }
function printjoin() { python -c "print(' '.join($@))"  | pbcopy; }


function ren() { for f in `find . -name '*$1'`; do mv $f `echo $f | sed -e 's/$1/$2/g'` ; done; }

#alias readline='/intucell/latest/bin/easy_install readline; /intucell/latest/testing/bin/easy_install readline'
alias class=def
alias venv='. /dev/bin/activate'
#alias vtenv='. /dev/testing/bin/activate'
alias title=label
alias grepi='\grep --color'
alias grep='grep -i --color'
alias threads='ps -emo %cpu,pid,tid,user,arg'
alias psgrep='ps -ef | grep'
alias clnpyc='find . -name "*.pyc" -delete'
alias clnswp='find . -name "*.swp" -delete'
#alias tpython='/dev/testing/bin/python'
alias ip='/dev/bin/ipython'
#alias tp='/dev/testing/bin/ipython'
alias sp='python ~/ishells/with_store.py'
#alias cli='/dev/bin/son_cli -i -H 127.0.0.1 -p 5000'

function grepindent() { grep -nE "^ {$1}" $3 | grep -vE " {$2}"; }

# git aliases
alias g='git'
alias ggi='git grep'
alias gg='git grep -i'
alias gs='git status'
alias gss='git show --stat'
alias gf='git fetch'
alias gpr='git pull --rebase'
alias grb='git fetch && git rebase origin/master'
alias grbi='git fetch && git rebase -i origin/master'
alias grc='git rebase --continue'
alias gbl='git blame HEAD'
alias gsu='git submodule update --init'
alias grso='git remote show origin'
alias gmine='gbr -Eo "aviv.*"'
alias gmineline='gmine | tr -s "\n" " "'
alias gc='git checkout'
alias gd='git diff'
alias gdc='git diff --cached'
alias gl='git log'
alias glo='git log --oneline'
alias gb='git branch -vv'
alias gbg='gb | grep'
alias gbr='gb -r | grep'
alias glaviv='git log --author="Aviv Shahar"'
alias gclean='g clean -fdx -e .vagrant -e .sconsign.dblite'
alias gurl='grep url .git/config | grep -Eo "git@.*" | pbcopy'

function gbc () { git branch | grep $1 | xargs git checkout ; }
function gbs () { git branch | grep $1 | xargs git show ; }
function gbss () { git branch | grep $1 | xargs git show --stat; }
function gbd () { git branch | grep $1 | head -n 1 | xargs git branch -d ; }
function gbD () { git branch | grep $1 | head -n 1 | xargs git branch -D ; }

# folders
alias cdn='cd ~/vast/orion'
alias cdo='cd ~/vast/old_orion'

# tests
#alias nosetests='/intucell/latest/testing/bin/son_nosetests --root=/intucell/data$(basename $PWD) --with-doctest --with-gevent_framework -s'
alias nosecover='nosetests --with-coverage --cover-html --cover-html-dir=/tmp/coverage'
alias nosepudb='nosetests -v --pudb-failure --pudb'
alias nt=nosetests
alias np=nosepudb

# vagrant
alias vup='vagrant up'
alias vsh='vagrant ssh'
